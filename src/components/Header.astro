---
const menuItems = [
  { href: "/about", label: "Sobre mí" },
  { href: "/projects", label: "Proyectos" },
  { href: "/generar-cv", label: "Generar CV" },
];
---

<header
  class="sticky top-0 z-50 bg-cream/80 backdrop-blur-sm border-b border-black/10 py-4"
>
  <nav class="container mx-auto px-6 flex justify-between items-center">
    <!-- Logo / Nombre -->
    <a
      href="/"
      class="text-2xl font-bold tracking-tight hover:opacity-80 transition animate-fade-in"
    >
      INICIO
    </a>

    <!-- Botón hamburguesa (visible en móvil) -->
    <button
      class="md:hidden p-2 rounded-lg hover:bg-black/5 transition focus:outline-none"
      id="menu-btn"
      aria-label="Abrir menú"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
      </svg>
    </button>

    <!-- Menú para escritorio (visible desde md) -->
    <div class="hidden md:flex space-x-6 text-sm font-medium">
      {
        menuItems.map((item, index) => (
          <a
            href={item.href}
            class="hover:underline underline-offset-4 transition-all duration-300 hover:rotate-6 hover:scale-110 inline-block animate-fade-in"
            style={{ animationDelay: `${index * 100}ms` }}
          >
            {item.label}
          </a>
        ))
      }
    </div>

    <!-- Menú desplegable para móvil (oculto por defecto) -->
    <div
      id="mobile-menu"
      class="hidden absolute top-full left-0 w-full bg-cream border-b border-black/10 py-4 px-6 flex flex-col space-y-4 text-sm font-medium shadow-lg animate-slide-down md:hidden"
    >
      {
        menuItems.map((item) => (
          <a
            href={item.href}
            class="block py-2 hover:underline underline-offset-4 transition-all duration-300 hover:rotate-3 hover:translate-x-2"
          >
            {item.label}
          </a>
        ))
      }
    </div>
  </nav>
</header>
<script>
  const btn = document.getElementById("menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  if (btn && mobileMenu) {
    // Alternar menú al hacer clic en el botón
    btn.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });

    // Cerrar menú al hacer clic en un enlace
    document.querySelectorAll("#mobile-menu a").forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
      });
    });

    // Cerrar menú al hacer clic fuera
    document.addEventListener("click", (event) => {
      const target = event.target;
      // Comprobamos que target es un nodo del DOM
      if (target instanceof Node) {
        if (!btn.contains(target) && !mobileMenu.contains(target)) {
          mobileMenu.classList.add("hidden");
        }
      }
    });
  }
</script>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }
</style>
